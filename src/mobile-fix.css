/* ========================================
   COMPREHENSIVE MOBILE INTERACTION FIX
   Prevents accidental hover/touch animations while scrolling
   ======================================== */

/* 1. REMOVE MOBILE TAP HIGHLIGHT */
* {
  -webkit-tap-highlight-color: transparent !important;
  -webkit-touch-callout: none;
}

/* Re-enable text selection for inputs only */
input,
textarea,
[contenteditable] {
  -webkit-user-select: text;
  user-select: text;
}

/* Allow text selection - improves scroll performance */
*:not(input):not(textarea):not([contenteditable]) {
  -webkit-user-select: auto;
  user-select: auto;
}

/* 2. PREVENT FOCUS STYLES FROM FIRING ON TOUCH */

/* Keep accessibility for keyboard users */

/* 3. DISABLE HOVER ON TOUCH DEVICES */
@media (hover: none) and (pointer: coarse) {
  /* Remove ALL hover effects on touch devices with maximum specificity */
  
  /* Remove hover pseudo-elements */
  
  /* CRITICAL: Disable active state on touch devices to prevent scroll feedback */
  
  /* Disable transitions on touch devices */
  * {
    transition-duration: 0ms !important;
    transition-property: none !important;
  }

  /* Enable active states for touch feedback */
  button:active,
  a:active,
  [role="button"]:active {
    opacity: 0.8;
  }

  /* Better touch feedback */
  input:focus,
  textarea:focus,
  select:focus {
    outline: 2px solid #667eea;
    outline-offset: 2px;
  }
}

/* 4. ENABLE HOVER ONLY ON DESKTOP WITH PRECISE POINTER */
@media (hover: hover) and (pointer: fine) {
  /* Only apply hover to interactive elements */
  button:hover,
  a:hover,
  [role="button"]:hover {
    opacity: 0.9;
  }

  /* Card hover effects only on desktop */
  [class*="card"]:hover,
  [class*="Card"]:hover {
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
  }
}

/* ========================================
   5. TOUCH DEVICE SPECIFIC OPTIMIZATIONS
   ======================================== */

@media (pointer: coarse) {
  /* Increase minimum tap target size */
  button,
  a,
  input,
  select,
  textarea,
  [role="button"],
  [role="link"],
  [role="tab"] {
    min-height: 48px;
    min-width: 48px;
  }

  /* Better spacing around buttons */
  button {
    margin: 4px;
  }

  /* Disable double-tap zoom on buttons */
  button,
  a,
  input,
  label {
    touch-action: manipulation;
  }

  /* Improve scrolling on mobile */
  [class*="scroll"],
  [class*="Scroll"],
  [class*="list"],
  [class*="List"] {
    -webkit-overflow-scrolling: touch;
  }

  /* Better form input spacing */
  input,
  textarea,
  select {
    padding: 12px;
    min-height: 48px;
    margin: 8px 0;
  }

  /* Prevent zoom on inputs */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  textarea,
  select {
    font-size: 16px;
    zoom: 1;
  }

  /* Better checkbox/radio sizing */
  input[type="checkbox"],
  input[type="radio"] {
    width: 24px;
    height: 24px;
    min-width: 48px;
    min-height: 48px;
  }
}

/* ========================================
   6. LANDSCAPE MOBILE OPTIMIZATIONS
   ======================================== */

@media (max-height: 500px) and (orientation: landscape) {
  [class*="header"],
  [class*="Header"] {
    margin-bottom: 8px;
  }

  button {
    padding: 8px 12px;
    min-height: 40px;
    margin: 2px;
  }

  input,
  textarea,
  select {
    padding: 8px 12px;
    margin: 4px 0;
    font-size: 14px;
  }

  [class*="modal"],
  [class*="Modal"],
  [class*="drawer"],
  [class*="Drawer"] {
    max-height: 85vh;
  }
}

/* ========================================
   7. PERFORMANCE OPTIMIZATIONS
   ======================================== */

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Disable animations while scrolling */
.scrolling,
.scrolling * {
  transition: none !important;
  animation: none !important;
}

/* ======================================== */

/* 5. DISABLE :ACTIVE ON TOUCH DEVICES (prevents scroll feedback) */
@media (hover: none) and (pointer: coarse) {
  /* Completely disable active states on mobile with maximum specificity */
}

/* Only enable active on desktop with mouse */

/* Prevent :active during scroll */

/* 6. REMOVE ANIMATIONS FROM NON-INTERACTIVE ELEMENTS */

/* 7. MOBILE-SPECIFIC TOUCH IMPROVEMENTS */
@media (hover: none) and (pointer: coarse) {
  /* Better tap targets */
  button,
  a,
  [role="button"],
  [class*="btn"],
  [class*="Btn"],
  [class*="button"],
  [class*="Button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Remove cursor styles on touch devices */
  * {
    cursor: default !important;
  }
  
  /* CRITICAL: Disable ALL pseudo-class states on touch with maximum specificity */
}

/* 8. DISABLE TRANSITIONS DURING SCROLL */
.scrolling * {
  transition: none !important;
  animation: none !important;
}

/* 9. SMOOTH SCROLLING */
html {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* 10. PREVENT PULL-TO-REFRESH OVERSCROLL */
body {
  overscroll-behavior-y: none;
  -webkit-overflow-scrolling: touch;
}

/* 11. OPTIMIZE FOR MOBILE PERFORMANCE */
@media (max-width: 768px) {
  /* Reduce animations for better performance */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  /* Only allow transitions on intentional interactions */
}

/* 12. PREVENT ACCIDENTAL DOUBLE-TAP ZOOM */
button,
a,
[role="button"],
[class*="btn"],
[class*="Btn"],
[class*="button"],
[class*="Button"] {
  touch-action: manipulation;
}

/* 13. REMOVE WEBKIT DEFAULT STYLES */
button,
input,
select,
textarea {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* 14. PREVENT FLASH OF UNSTYLED CONTENT */
html {
  visibility: visible;
  opacity: 1;
}

/* 15. ENSURE SMOOTH TOUCH SCROLLING */
* {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}
